CREATE DATABASE BotShop

USE BotShop

CREATE TABLE Admin (
	ID INT NOT NULL PRIMARY KEY,
	Email VARCHAR(50) NOT NULL,
	Password VARCHAR(200)
)

CREATE TABLE Shipper (
	SID INT NOT NULL PRIMARY KEY,
	SName NVARCHAR(250) NOT NULL UNIQUE,
	SEmail VARCHAR(50),
	SPassword VARCHAR(200),
	SPhone VARCHAR(10),
	SAddress NVARCHAR(250),
	SCountry NVARCHAR(250)
)

CREATE TABLE [User] (
	UID INT NOT NULL PRIMARY KEY,
	UName NVARCHAR(200) NOT NULL,
	UEmail VARCHAR(50) NOT NULL UNIQUE,
	UPassword VARCHAR(200) NOT NULL,
	UPhone VARCHAR(10),
	USecuQues NVARCHAR(400),
	UAnswer NVARCHAR(200),
	UAddress NVARCHAR(250),
	UCountry NVARCHAR(250)
)

CREATE TABLE Category (
	CID INT NOT NULL PRIMARY KEY,
	CName NVARCHAR(200) NOT NULL,
	CDecrip NVARCHAR(400)
)

CREATE TABLE Product (
	PID INT NOT NULL PRIMARY KEY,
	PName NVARCHAR(200) NOT NULL,
	CID INT NOT NULL REFERENCES Category(CID) ON DELETE CASCADE ON UPDATE CASCADE,
	PQuantity INT NOT NULL,
	PPrice FLOAT,
)

CREATE TABLE Purchase (
	ID INT NOT NULL PRIMARY KEY,
	UserID INT REFERENCES [User](UID) ON DELETE CASCADE ON UPDATE CASCADE,
	ProductID INT REFERENCES Product(PID) ON DELETE CASCADE ON UPDATE CASCADE,
	Quantity INT,
	Price FLOAT,
	p_date NVARCHAR(200),
	ReceivedDate NVARCHAR(200),
	ShipperID INT REFERENCES Shipper(SID) ON DELETE CASCADE ON UPDATE CASCADE,
	Status NVARCHAR(200),
)

CREATE TABLE CurrentLogins (
	Role NVARCHAR(50),
	Email NVARCHAR(200),
	PRIMARY KEY (Role, Email)
)

INSERT INTO Shipper
VALUES (0, 'UNKNOW', 'unknow@gmail.com', '1000:dc6a81af35930193827f1752750fef44:5d6e7bd3619ad29d1d8397751281851fac646666652888025a8038dcd3c6dc58',
		'0000000000', 'UNKNOW', 'UNKNOW')
-- password of Shipper unknow = unknow

INSERT INTO Admin(ID, Email, Password)
VALUES (1, 'admin@gmail.com', '1000:8ef22493ee33d920fa373fea8c7d7372:aba380bba3a9bb257776503b370f202fa54abd27c4718906ec9cbf4a7bb16518')
-- password of Admin = 123 
